{
  "bookSourceUrl": "È£õÈæçÂú®Â§©",
  "bookSourceName": "üåô È£õÂ§©Â∞èË™™",
  "bookSourceGroup": "üåô ŒëŒ°I",
  "bookSourceType": 0,
  "weight": 0,
  "enabled": true,
  "searchUrl": "@js:\nlet sign = getSign(key, 's')\njava.put('tsign', [sign, time]);\n\n`http://s1.ftn178.com/server/v3/search?sign=${sign}&app=FTNovel&os=Android&pbv=v1.0.57&_t=${time}&channel=ft0001&vs=14,{\n  \"body\": \"nsc=0&nci=1&query=${key}&timestamp=${time}&gid=2&channel=ft0001\",\n  \"method\": \"POST\"\n}`",
  "ruleSearch": {
    "bookList": "search",
    "name": "title",
    "author": "author",
    "intro": "description",
    "coverUrl": "thumb",
    "bookUrl": "@js:\nlet tsign = java.get('tsign').split(',')\nlet bid = java.getString('$.bid')\njava.put('bid', bid);\n`http://s1.ftn178.com/v3/book6/detail.api?nci=1&channel=ft0001&bid=${bid}&timestamp=${tsign[1]}&nsc=1&sign=${tsign[0]}&app=FTNovel`",
    "kind": "catename",
    "lastChapter": ""
  },
  "ruleBookInfo": {
    "init": "data",
    "name": "title",
    "author": "author",
    "intro": "description",
    "coverUrl": "",
    "tocUrl": "@js:\nlet bid = java.get(\"bid\");\nlet sign = getSign(bid, \"t\");\n`http://s1.ftn178.com/v3/book/chapter.api?app=FTNovel&os=Android&pbv=v1.0.57&_t=${time}&channel=ft0001&vs=14&sign=${sign},{\n  \"body\": \"bid=${bid}&nsc=1&nci=1&gid=1&channel=ft0001&timestamp=${time}\",\n  \"method\": \"POST\"\n}`",
    "lastChapter": "lastchaptertitle"
  },
  "ruleToc": {
    "chapterList": "data.chapters",
    "chapterName": "title",
    "chapterUrl": "@js:`data:;base64,${java.base64Encode({{$.id}})},{\"type\":\"num\"}`",
    "nextTocUrl": ""
  },
  "ruleContent": {
    "content": "<js>\ncid = java.hexDecodeToString(result)\nbid = java.get('bid')\nsign = getSign(bid, 'c', cid)\ncu = `http://s1.ftn178.com/v3/book/content.api?bid=${bid}&timestamp=${time}&sign=${sign}&app=FTNovel`\nbody = `bid=${bid}&chapterid=${cid}&nsc=1&nci=1&gid=2&channel=ft0001&timestamp=${time}`\njava.post(cu, body, {}).body()\n</js>\n$.data.body",
    "nextContentUrl": "",
    "replaceRegex": ""
  },
  "ruleExplore": {
    "bookList": "",
    "name": "",
    "author": "",
    "coverUrl": "",
    "bookUrl": ""
  },
  "header": "{\n\t\"User-Agent\": \"okhttp/5.0.0-alpha.14\"\n}",
  "loginUrl": null,
  "jsLib": "time = Math.floor(Date.now() / 1000).toString()\n\nfunction getSign (key, type, num) {\n  const { java } = this\n  const secret = 'magic2019'\n  let baseString\n\n  switch (type) {\n    case 's':\n      baseString = `channel=ft0001&gid=2&nci=1&nsc=0&query=${java.encodeURI(key)}&timestamp=${time}&secret=${secret}`\n      break\n    case 't':\n      baseString = `bid=${key}&channel=ft0001&gid=1&nci=1&nsc=1&timestamp=${time}&secret=${secret}`\n      break\n    case 'c':\n      baseString = `bid=${key}&channel=ft0001&chapterid=${num}&gid=2&nci=1&nsc=1&timestamp=${time}&secret=${secret}`\n      break\n    default:\n      throw new Error('Invalid type')\n  }\n\n  return java.md5Encode(baseString).toUpperCase()\n}"
}
